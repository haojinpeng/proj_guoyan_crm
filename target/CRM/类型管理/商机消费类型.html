<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Layui</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<link rel="stylesheet" href="resources/layui/css/layui.css" media="all">
		<!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
	</head>
	<body>

		<table class="layui-hide" id="test" lay-filter="test"></table>

  <!-- 表头搜索-->
  <script type="text/html" id="toolbarDemo">
  	<div class="layui-form-item" style="height: 30px;" >
  		<div class="layui-inline">
  			<label class="layui-form-label" style="width: auto;">编号：</label>
  			<div class="layui-input-inline" >
  			   <input type="text" name="title" required  lay-verify="required" placeholder="请输入编号" autocomplete="off" class="layui-input">
  			</div>
  			
  			<label class="layui-form-label" style="width: auto;">消费类型</label>
  			<div class="layui-input-inline">
  			  <select name="city" lay-verify="required">
  			    <option value=""></option>
  			    <option value="0">唱歌</option>
  			    <option value="1">爬山</option>
  			    <option value="2">打高尔夫</option>
  			    <option value="3">蹦迪</option>
  			  </select>
  			 </div>		
  			  	  
  						 <button type="button" class="layui-btn layui-btn-sm" lay-event="cx3">搜索</button>
  						 <button type="button" class="layui-btn layui-btn-sm" lay-event="Add"><i  class="layui-icon layui-icon-add-circle"></i>增加</button>
  		</div>	
  							
  	</div>
  </script>
  <!-- 表头-->


<script id="kgdiv">
			<input type="checkbox" name="zzz" lay-skin="switch" lay-text="开启|关闭" checked/>
</script>

<script type="text/html" id="barDemo">
  <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
  <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>
     <!-- 编辑 -->
     <div id="DoitDiv" style="display: none;line-height: 30px;">
			<form class="layui-form " action="" lay-filter="dataFrm" id="dataFrm">

				<div class="layui-block">
					<label class="layui-form-label">编号</label>
					<div class="layui-input-block">
					  <input type="text" name="title" required   placeholder="XF006" autocomplete="off" class="layui-input" title="只读"  disabled="disabled">
					</div>
				</div>
				<br />
				<div class="layui-block">
					<label class="layui-form-label">消费类型</label>
					<div class="layui-input-block">
					  <select name="city" lay-verify="required">
					    <option value=""></option>
					    <option value="0">唱歌</option>
					    <option value="1">爬山</option>
					    <option value="2">打高尔夫</option>
					    <option value="3">蹦迪</option>
					  </select>
					</div>
				</div>
				<br />
				<div class="layui-block">
					<label class="layui-form-label">开关</label>
					<div class="layui-input-block">
					 <input type="checkbox" name="zzz" lay-skin="switch" lay-text="开启|关闭" />
					</div>
				</div>
				<br />
				<div class="layui-block">
					<div class="layui-input-inline" style="margin-left: 100px;">
						<button type="button" class="layui-btn layui-btn-normal layui-btn-sm layui-icon layui-icon-release" lay-filter="doSubmit"
						 lay-submit="">提交</button>
						<button type="reset" class="layui-btn layui-btn-warm layui-btn-sm layui-icon layui-icon-refresh">重置</button>
					</div>
				</div>
			</form>

		</div>
		<!-- 编辑结束 -->
		<!-- 添加 -->
		<div id="AddDiv" style="display: none;line-height: 30px;">
					<form class="layui-form " action="" lay-filter="dataFrm" id="dataFrm">
		
						<div class="layui-block" >
							<label class="layui-form-label">编号</label>
							<div class="layui-input-block">
							  <input type="text" name="title" required   placeholder="XF006" autocomplete="off" class="layui-input" title="只读"  disabled="disabled">
							</div>
						</div>
						<br />
						
						<div class="layui-block">
							<label class="layui-form-label">消费类型</label>
							<div class="layui-input-block">
							 <input type="text" name="title" required   autocomplete="off" class="layui-input" >
							</div>
						</div>
						<br />
						<div class="layui-block">
							<label class="layui-form-label">开关</label>
							<div class="layui-input-block">
							 <input type="checkbox" name="zzz" lay-skin="switch" lay-text="开启|关闭" checked/>
							</div>
						</div>
						<br />
						<div class="layui-block">
							<div class="layui-input-inline" style="margin-left: 100px;">
								<button type="button" class="layui-btn layui-btn-normal layui-btn-sm layui-icon layui-icon-release" lay-filter="doSubmit"
								 lay-submit="">提交</button>
								<button type="reset" class="layui-btn layui-btn-warm layui-btn-sm layui-icon layui-icon-refresh">重置</button>
							</div>
						</div>
					</form>
		
				</div>
				<!-- 添加结束 -->
 


	</body>
	<script src="resources/layui/layui.js" charset="utf-8"></script>
	<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->

	<script>
		layui.use(['table','jquery'], function() {
			var table = layui.table,
			$ = layui.jquery;

			table.render({
				elem: '#test',
				url: 'js/消费类型.json',
				toolbar: '#toolbarDemo' //开启头部工具栏，并为其绑定左侧模板
					,
				defaultToolbar: ['filter', 'exports', 'print', { //自定义头部工具栏右侧图标。如无需自定义，去除该参数即可
					title: '提示',
					layEvent: 'LAYTABLE_TIPS',
					icon: 'layui-icon-tips'
				}],
				title: '用户数据表',
				cols: [
					[{
						type: 'checkbox',
						fixed: 'left'
					}, {
						field: 'id',
						title: '编号',
						fixed: 'left',
						unresize: true,
						sort: true
					}, {
						field: 'name',
						title: '消费类型',
					}, {
						field: 'kg',
						title: '选择',
						templet: "#kgdiv"
					}, {
						fixed: 'right',
						title: '操作',
						toolbar: '#barDemo',
						width: 150
					}]
				],
				page: true
			});

			//头工具栏事件
			table.on('toolbar(test)', function(obj) {
				var checkStatus = table.checkStatus(obj.config.id);
				switch (obj.event) {

					//自定义头工具栏右侧图标 - 提示
					case 'LAYTABLE_TIPS':
						layer.alert('这是工具栏右侧自定义的一个图标按钮');
						break;
				};
			});
			//监听头部工具栏事件
			table.on("toolbar(test)", function(obj) {
				switch (obj.event) {

					case 'cx3':
						layer.msg('搜索');
						break;
					case 'Add':
						openAddDiv();
						break;
					case 'LAYTABLE_TIPS':
						layer.alert('这是工具栏右侧自定义的一个图标按钮');
						break;
				};
			});
			var url;
			var mainIndex;
			//打开添加页面
			function openAddDiv() {
				mainIndex = layer.open({
					type: 1,
					title: '添加类型',
					content: $('#AddDiv'),
					area: ['300px', '400px'],
					success: function(index) {
						//清空表单数据       
						$("#dataFrm")[0].reset();
						url = "user/addUser.action";
					}
				});
			}
			//监听行工具事件
			table.on('tool(test)', function(obj) {
				var data = obj.data;
				//console.log(obj)
				if (obj.event === 'del') {
					layer.confirm('真的删除行么', function(index) {
						obj.del();
						layer.close(index);
					});
				} else if (obj.event === 'edit') {
					openDoitDiv();

				}
			});
			//打开编辑页面
			function openDoitDiv() {
				mainIndex = layer.open({
					type: 1,
					title: '编辑',
					content: $('#DoitDiv'),
					area: ['300px', '400px'],
					success: function(index) {
						//清空表单数据       
						$("#dataFrm")[0].reset();
						url = "user/addUser.action";
					}
				});
			}



		});
	</script>
</html>
